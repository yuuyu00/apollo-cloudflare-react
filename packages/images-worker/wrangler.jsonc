{
  "$schema": "../../node_modules/wrangler/config-schema.json",
  "name": "apollo-cloudflare-images",
  "main": "src/index.ts",
  "compatibility_date": "2024-11-25",
  "compatibility_flags": ["nodejs_compat"],

  // デフォルト環境変数
  "vars": {
    "ENVIRONMENT": "development",
    "CORS_ORIGIN": "http://localhost:5000"
  },

  // R2 バケット設定
  "r2_buckets": [
    {
      "binding": "IMAGES_BUCKET",
      "bucket_name": "apollo-cloudflare-dev"
    }
  ],

  // Images API binding for image transformations
  "images": {
    "binding": "IMAGES_API"
  },

  // Observability設定
  "observability": {
    "logs": {
      "enabled": true
    }
  },

  // 開発サーバー設定
  "dev": {
    "port": 8788,
    "local_protocol": "http"
  },

  // 開発環境設定
  "env": {
    "dev": {
      "name": "apollo-cloudflare-images-dev",
      "routes": [
        {
          "pattern": "images.dev.yu-f87ct9a.dev",
          "custom_domain": true
        }
      ],
      "vars": {
        "ENVIRONMENT": "development",
        "CORS_ORIGIN": "https://dev.yu-f87ct9a.dev",
        "CLERK_PEM_PUBLIC_KEY": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArmHdTw+M4xALbZn5roVl\nP8I9WYwkuHQMw/p4GoI9oIutoiNLd5+ICk/7gcgpeNbuLCZgjl1z+lbq9lJngUs7\nYAmBKgRS14fYvzXYxrgIXglqvqSpxMkcqA43sEhf+ABczUQXvpifief5dW8kcH1i\nYndMhmd+yO+0iHO15T2rx66uQ2wKSNDokpXFTmKEuPempCMIT/I4UO3FEfWwP8TT\nN4uBNfT9+bixtc4ITqxfHDiJGZjV3ExxMbUgs3FfUkqz5brPyk1MngzgDn+99+K9\n6l12PgjzzNpbeTn5G38Qw6gRWOqbQR5AaB/74q9d5xBTNY5S/5+Cf2tzTTZNrxz3\n3wIDAQAB\n-----END PUBLIC KEY-----",
        "CLERK_PUBLISHABLE_KEY": "pk_test_bGlnaHQtYWtpdGEtNDcuY2xlcmsuYWNjb3VudHMuZGV2JA"
      },
      "r2_buckets": [
        {
          "binding": "IMAGES_BUCKET",
          "bucket_name": "apollo-cloudflare-dev"
        }
      ],
      "images": {
        "binding": "IMAGES_API"
      }
    },

    // 本番環境設定
    "prod": {
      "name": "apollo-cloudflare-images-prod",
      "routes": [
        {
          "pattern": "images.yu-f87ct9a.dev",
          "custom_domain": true
        }
      ],
      "vars": {
        "ENVIRONMENT": "production",
        "CORS_ORIGIN": "https://yu-f87ct9a.dev",
        "CLERK_PEM_PUBLIC_KEY": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArmHdTw+M4xALbZn5roVl\nP8I9WYwkuHQMw/p4GoI9oIutoiNLd5+ICk/7gcgpeNbuLCZgjl1z+lbq9lJngUs7\nYAmBKgRS14fYvzXYxrgIXglqvqSpxMkcqA43sEhf+ABczUQXvpifief5dW8kcH1i\nYndMhmd+yO+0iHO15T2rx66uQ2wKSNDokpXFTmKEuPempCMIT/I4UO3FEfWwP8TT\nN4uBNfT9+bixtc4ITqxfHDiJGZjV3ExxMbUgs3FfUkqz5brPyk1MngzgDn+99+K9\n6l12PgjzzNpbeTn5G38Qw6gRWOqbQR5AaB/74q9d5xBTNY5S/5+Cf2tzTTZNrxz3\n3wIDAQAB\n-----END PUBLIC KEY-----",
        "CLERK_PUBLISHABLE_KEY": "pk_test_bGlnaHQtYWtpdGEtNDcuY2xlcmsuYWNjb3VudHMuZGV2JA"
      },
      "r2_buckets": [
        {
          "binding": "IMAGES_BUCKET",
          "bucket_name": "apollo-cloudflare-prod"
        }
      ],
      "images": {
        "binding": "IMAGES_API"
      }
    }
  }
}
